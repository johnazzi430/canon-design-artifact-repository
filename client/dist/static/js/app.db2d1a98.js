(function(e){function t(t){for(var a,r,s=t[0],l=t[1],c=t[2],u=0,p=[];u<s.length;u++)r=s[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a]);d&&d(t);while(p.length)p.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,s=1;s<n.length;s++){var l=n[s];0!==i[l]&&(a=!1)}a&&(o.splice(t--,1),e=r(r.s=n[0]))}return e}var a={},i={app:0},o=[];function r(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var a=n("85ec"),i=n.n(a);i.a},"096a":function(e,t,n){},"0b9c":function(e,t){},"0cba":function(e,t,n){},"1e1b":function(e,t,n){},"1e69":function(e,t,n){"use strict";var a=n("0b9c"),i=n.n(a);t["default"]=i.a},"3a62":function(e,t,n){},"3e3c":function(e,t,n){},"516c":function(e,t,n){"use strict";var a=n("3e3c"),i=n.n(a);i.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("app-nav"),n("router-view")],1)},o=[],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-navbar",{staticClass:"navbar navbar-expand-md navbar-light ",staticStyle:{"padding-left":"30px"}},[n("div",{staticClass:"navbar-nav"},[n("b-navbar-brand",{attrs:{to:"/"}},[e._v("UTC Product Insight")]),n("b-nav-item",{attrs:{to:"/insights"}},[e._v("Insights")]),n("b-nav-item",{attrs:{to:"/persona"}},[e._v("Persona")]),n("b-nav-item",{attrs:{to:"/product"}},[e._v("Product")]),n("b-nav-item",{attrs:{disabled:""}},[e._v("Playlist")]),n("b-nav-item",{attrs:{disabled:""}},[e._v("About")]),e.isLoggedIn?n("b-nav-item",{on:{click:e.logout}},[e._v("Logout")]):e._e(),"admin"===e.userRole?n("b-nav-item",{attrs:{to:"/admin"}},[e._v("Admin")]):e._e()],1)])],1)},s=[],l=(n("d3b7"),n("2f62")),c=n("1052"),d=n.n(c),u=(n("0d03"),n("ac1f"),n("1276"),new a["default"]);a["default"].use(l["a"]);var p=new l["a"].Store({state:{status:"",token:localStorage.getItem("token")||"",user:{}},mutations:{auth_request:function(e){e.status="loading"},auth_success:function(e,t,n,a){e.status="success",e.token=t,e.user=n,e.role=a},auth_error:function(e){e.status="error"},logout:function(e){e.status="",e.token="",e.role=""}},actions:{login:function(e,t){var n=e.commit;return new Promise((function(e,a){n("auth_request"),d()({method:"post",url:"/api/login",data:t,header:{"Content-Type":"application/json"}}).then((function(t){var a=t.data.token,i=t.data.user,o=t.data.role;localStorage.setItem("token",a),d.a.defaults.headers.common["Authorization"]=a,n("auth_success",a,i,o),e(t)})).catch((function(e){n("auth_error"),localStorage.removeItem("token"),a(e)}))}))},logout:function(e){var t=e.commit;return new Promise((function(e,n){t("logout"),localStorage.removeItem("token"),delete d.a.defaults.headers.common["Authorization"]}))}},getters:{isLoggedIn:function(e){return!!e.token},authStatus:function(e){return e.status},userRole:function(e){return!!e.role}}}),f={data:function(){return{role:null}},computed:{isLoggedIn:function(){return this.$store.getters.isLoggedIn},userRole:function(){return this.$store.getters.userRole}},methods:{logout:function(){this.$store.dispatch("logout"),this.$router.push("/login")}},mounted:function(){this.role=this.$store.state.role}},m=f,h=(n("5b493"),n("2877")),v=Object(h["a"])(m,r,s,!1,null,null,null),g=v.exports,b={name:"app",components:{"app-nav":g}},_=b,w=(n("034f"),Object(h["a"])(_,i,o,!1,null,null,null)),x=w.exports,y=n("5f5b"),C=n("8e5f"),k=n.n(C),$=(n("b0c0"),n("8c4f")),D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[n("nav",{staticClass:"sidepanel-left",attrs:{id:"left-sidepanel"}},[n("a",{staticClass:"nav-link active",attrs:{href:"javascript:void(0)",id:"Cards"},on:{click:function(t){e.changeView("card"),e.closeNav()}}},[n("i",{staticClass:"fa fa-user"})]),n("a",{staticClass:"nav-link active",attrs:{href:"javascript:void(0)",id:"Table"},on:{click:function(t){return e.changeView("table")}}},[n("i",{staticClass:"fa fa-list"})]),null!==this.selection?n("div",[n("a",{staticClass:"nav-link active",attrs:{href:"javascript:void(0)",id:"Detail"},on:{click:function(t){return e.expandDetail()}}},[n("i",{staticClass:"fa fa-align-left"})])]):n("div",[n("a",{staticClass:"nav-link disabled",attrs:{href:"javascript:void(0)",id:"Detail"},on:{click:function(t){return e.expandDetail()}}},[n("i",{staticClass:"fa fa-align-left"})])]),n("a",{staticClass:"nav-link active",attrs:{href:"javascript:void(0)",id:"Add","data-toggle":"tooltip",title:"Add"},on:{click:function(t){e.addDataAction(),e.expandDetail()}}},[n("i",{staticClass:"fa fa-plus"})])]),"table"===e.view?n("div",{key:e.view,staticClass:"container-fluid",attrs:{id:"persona-panel"}},[n("div",[n("persona-data",{key:e.dataKey})],1)]):e._e(),"card"===e.view?n("div",{key:e.view},[n("persona-card",{key:e.dataKey},[e._v(">")])],1):e._e(),n("div",{staticClass:"sidepanel-right",attrs:{id:"right-sidepanel"}},[n("h1",[n("a",{staticClass:"closebtn",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.closeDetail()}}},[e._v("×")])]),n("div",{attrs:{id:"side-panel-switcher"}},[n("persona-detail",{key:e.detailKey})],1)])])},I=[],j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"test-header row",staticStyle:{margin:"15px"}},[n("b-alert",{attrs:{show:!0===this.alert_show,variant:"info",dismissible:""}},[e._v(" Data Updated "+e._s(this.alert_text)+" ")]),n("div",{staticClass:"col-2"},[e._v(" Selection: "),n("span",{attrs:{id:"selectedRows"}}),n("span",{attrs:{selectedRow:e.selectedRow}})]),n("div",{staticClass:"col-2"},[n("span",[e._v(" Search: ")]),n("input",{attrs:{type:"text",id:"filter-text-box",placeholder:"Filter..."},on:{input:function(t){return e.onFilterTextBoxChanged()}}})])],1),n("ag-grid-vue",{staticClass:"ag-theme-balham",staticStyle:{width:"100%",height:"500px"},attrs:{columnDefs:e.columnDefs,rowData:e.rowData,modules:e.modules,rowSelection:"single"},on:{"grid-ready":e.onGridReady,"selection-changed":e.onSelectionChanged}})],1)},R=[],A=(n("4160"),n("159b"),n("228c")),S=n("0d1d"),E=(Object({NODE_ENV:"production",BASE_URL:"/"}).API_URL,{name:"PersonaTable",data:function(){return{columnDefs:null,rowData:null,rowSelection:null,gridApi:null,gridOptions:null,modules:S["a"],selectedRow:null,defaultColDef:null,alert_show:!1,alert_text:null}},components:{AgGridVue:A["AgGridVue"]},methods:{onGridReady:function(e){this.gridApi=e.api,this.columnApi=e.columnApi},onSelectionChanged:function(){var e=this.gridApi.getSelectedRows(),t="",n="";e.forEach((function(e,a){0!==a&&(t+=", "),t+=e.name,n=e.id})),document.querySelector("#selectedRows").innerHTML=t,u.$emit("persona-selection-changed",this.selectedRow=n),this.$router.push("/persona/"+id)},onFilterTextBoxChanged:function(){this.gridApi.setQuickFilter(document.getElementById("filter-text-box").value)}},mounted:function(){var e=this;u.$on("persona-table-changed",(function(t){fetch("/api/persona-table").then((function(e){return e.json()})).then((function(t){return e.rowData=t})),console.log("recived")}))},beforeMount:function(){var e=this;this.columnDefs=[{headerName:"Title",field:"title",filter:"agTextColumnFilter",width:200},{headerName:"Quote",field:"quote",filter:"agTextColumnFilter",width:400},{headerName:"Internal or External",field:"external",width:50,headerTooltip:"Flag if external",filter:!0},{headerName:"Function",field:"job_function",filter:"agTextColumnFilter",width:400},{headerName:"Market Size",field:"market_size",filter:!0,width:50}],this.defaultColDef={sortable:!0,resizable:!0,filter:!0,getQuickFilterText:function(e){return e.value.name}},this.gridOptions={},this.rowSelection="single",this.gridOptions.rowHeight=200,fetch("/api/persona-table").then((function(e){return e.json()})).then((function(t){return e.rowData=t})),this.$nextTick((function(){fetch("/api/persona-table").then((function(e){return e.json()})).then((function(t){return e.rowData=t}))}))}}),P=E,O=Object(h["a"])(P,j,R,!1,null,null,null),T=O.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"padding-right":"15px","margin-left":"15px"}},[a("b-form",{attrs:{id:"persona-detail"},on:{submit:e.onEdit,reset:e.onReset,archive:e.onArchive}},[!1===e.editing&&null!==e.form.id?a("div",{attrs:{id:"persona-detail-show"}},[a("h1",[e._v("Detail")]),a("span",[e._v(" Persona ID: "+e._s(e.form.id)+" | Revision: "+e._s(e.form.revision)+" ")]),a("div",{},[a("div",{},[a("img",{staticClass:"avatar",attrs:{src:n("d74c"),alt:"Avatar"}})]),a("label",{attrs:{for:"Name"}},[e._v("Name")]),a("div",{staticClass:"panel-group"},[e._v(" "+e._s(e.form.name)+" ")]),a("label",{attrs:{for:"Title"}},[e._v("Title")]),a("p",{staticClass:"text-wrap"},[e._v(" "+e._s(e.form.title)+" ")]),a("label",{attrs:{for:"external"}},[e._v("Internal or External?")]),a("p",{staticClass:"text-wrap"},[e._v(" "+e._s(e.form.external)+" ")]),a("label",{attrs:{for:"qty"}},[e._v("Number people who fit this persona")]),a("p",[e._v(" "+e._s(e.form.market_size)+" ")]),a("label",{attrs:{for:"quote"}},[e._v("Persona Quote")]),a("p",[e._v(" "+e._s(e.form.quote)+" ")]),""!==e.form.job_function?a("div",[a("label",{attrs:{for:"function"}},[e._v("Job Function")]),a("p",{staticClass:"text-wrap"},[e._v(" "+e._s(e.form.job_function)+" ")])]):e._e(),""!==e.form.needs?a("div",[a("label",{staticStyle:{"white-space":"pre-line"},attrs:{for:"needs"}},[e._v("Needs")]),a("p",[e._v(" "+e._s(e.form.needs)+" ")])]):e._e(),""!==e.form.wants?a("div",[a("label",{staticStyle:{"white-space":"pre-line"},attrs:{for:"wants"}},[e._v("Wants")]),a("p",[e._v(" "+e._s(e.form.wants)+" ")])]):e._e(),""!==e.form.pain_point?a("div",[a("label",{attrs:{for:"pain_point"}},[e._v("Pain Points")]),a("p",[e._v(" "+e._s(e.form.pain_point)+" ")])]):e._e(),a("label",{attrs:{for:"buss_val"}},[e._v("Market Value")]),a("div",{staticClass:"barcont"},[a("div",{staticClass:"bar buss_val",style:{width:e.form.buss_val/5*100+"%"}},[e._v(e._s(e.form.buss_val))])]),a("br"),a("label",[e._v("Associated Products:")]),e._l(e.form.products,(function(t){return a("div",{key:t.id},[a("b-button",{attrs:{to:"/product/"+t.id,pill:"",variant:"info"}},[e._v(e._s(t.name))])],1)})),a("br"),a("label",[e._v("Associated Roles:")]),e._l(e.form.roles,(function(t){return a("div",{key:t.id},[a("b-badge",{attrs:{pill:"",variant:"success"}},[e._v(e._s(t.name))])],1)})),a("br"),a("label",[e._v("Files:")]),e._l(e.uploadedFiles,(function(t){return a("div",{key:t.id},[e._v(" "+e._s(t.filename)+" "),a("button",{attrs:{type:"button",name:"button",target:"_blank"},on:{click:function(n){return e.getFile(t.id)}}},[a("i",{staticClass:"fa fa-file"})])])})),a("hr")],2),a("b-button",{attrs:{href:"javascript:void(0)"},on:{click:function(t){e.editing=!0}}},[e._v("Edit")]),a("hr"),a("h4",[e._v("Comments")]),a("comment-view",{attrs:{sourceTable:e.source,itemId:e.form.id}})],1):a("div",{attrs:{id:"persona-detail-edit"}},[null===e.form.id?a("h1",[e._v("Add")]):a("h1",[e._v("Edit")]),a("div",[a("label",{attrs:{for:"Name"}},[e._v("Name")]),a("b-form-input",{attrs:{name:"Name"},on:{change:function(t){return e.onInputChanged("name")}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),a("label",{attrs:{for:"Title"}},[e._v("Title")]),a("b-form-input",{attrs:{id:"Title",name:"Title"},on:{change:function(t){return e.onInputChanged("title")}},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}}),a("div",{},[a("label",{attrs:{for:"external"}},[e._v("Internal or External?")]),a("b-form-radio",{attrs:{name:"some-radios",value:"1"},on:{change:function(t){return e.onInputChanged("external")}},model:{value:e.form.external,callback:function(t){e.$set(e.form,"external",t)},expression:"form.external"}},[e._v("External")]),a("b-form-radio",{attrs:{name:"some-radios",value:"0"},on:{change:function(t){return e.onInputChanged("external")}},model:{value:e.form.external,callback:function(t){e.$set(e.form,"external",t)},expression:"form.external"}},[e._v("Internal")])],1),a("label",{attrs:{for:"qty"}},[e._v("Number people who fit this persona")]),a("b-form-input",{attrs:{type:"number",id:"qty",name:"qty"},on:{change:function(t){return e.onInputChanged("market_size")}},model:{value:e.form.market_size,callback:function(t){e.$set(e.form,"market_size",t)},expression:"form.market_size"}}),a("label",{attrs:{for:"quote"}},[e._v("Persona Quote")]),a("b-form-textarea",{attrs:{id:"quote",name:"quote"},on:{change:function(t){return e.onInputChanged("quote")}},model:{value:e.form.quote,callback:function(t){e.$set(e.form,"quote",t)},expression:"form.quote"}}),a("label",{attrs:{for:"function"}},[e._v("Job Function")]),a("b-form-textarea",{attrs:{id:"function",name:"function"},on:{change:function(t){return e.onInputChanged("job_function")}},model:{value:e.form.job_function,callback:function(t){e.$set(e.form,"job_function",t)},expression:"form.job_function"}}),a("label",{attrs:{for:"needs"}},[e._v("Needs")]),a("b-form-textarea",{attrs:{id:"needs",name:"needs"},on:{change:function(t){return e.onInputChanged("needs")}},model:{value:e.form.needs,callback:function(t){e.$set(e.form,"needs",t)},expression:"form.needs"}}),a("label",{attrs:{for:"wants"}},[e._v("Wants")]),a("b-form-textarea",{attrs:{id:"wants",name:"wants"},on:{change:function(t){return e.onInputChanged("wants")}},model:{value:e.form.wants,callback:function(t){e.$set(e.form,"wants",t)},expression:"form.wants"}}),a("label",{attrs:{for:"pain-point"}},[e._v("Pain Points")]),a("b-form-textarea",{attrs:{id:"pain_point",name:"pain_point"},on:{change:function(t){return e.onInputChanged("pain_points")}},model:{value:e.form.pain_point,callback:function(t){e.$set(e.form,"pain_point",t)},expression:"form.pain_point"}}),a("label",{attrs:{for:"buss-val"}},[e._v("value to business")]),a("b-form-input",{attrs:{type:"range",min:"0",max:"5"},on:{change:function(t){return e.onInputChanged("buss_val")}},model:{value:e.form.buss_val,callback:function(t){e.$set(e.form,"buss_val",t)},expression:"form.buss_val"}}),a("div",{staticClass:"mt-2"},[e._v("Value: "+e._s(e.form.buss_val))]),a("br"),a("label",{attrs:{for:"product-select"}},[e._v("Add Product: ")]),a("br"),a("multiselect",{attrs:{options:e.product_options,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"name","track-by":"id","preselect-first":!1},on:{input:function(t){return e.onInputChanged("products")}},scopedSlots:e._u([{key:"selection",fn:function(t){var n=t.values,i=(t.search,t.isOpen);return[n.length&&!i?a("span",{staticClass:"multiselect__single"},[e._v(" "+e._s(n.length)+" options selected ")]):e._e()]}}]),model:{value:e.form.products,callback:function(t){e.$set(e.form,"products",t)},expression:"form.products"}}),a("br"),a("br"),a("multiselect",{attrs:{options:e.role_options,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"name","track-by":"id","preselect-first":!1},on:{input:function(t){return e.onInputChanged("roles")}},scopedSlots:e._u([{key:"selection",fn:function(t){var n=t.values,i=(t.search,t.isOpen);return[n.length&&!i?a("span",{staticClass:"multiselect__single"},[e._v(" "+e._s(n.length)+" options selected ")]):e._e()]}}]),model:{value:e.form.roles,callback:function(t){e.$set(e.form,"roles",t)},expression:"form.roles"}}),a("br")],1),a("div",{staticClass:"container"},[a("label",[e._v("Files "),a("input",{ref:"file",attrs:{type:"file",id:"file"},on:{change:function(t){return e.handleFileUpload()}}})]),a("button",{attrs:{href:"javascript:void(0)"},on:{click:e.submitFiles}},[e._v("Add Files")]),a("br")]),a("div",[a("label",{attrs:{for:"persona_file"}},[e._v("Add File")]),a("b-form-file",{attrs:{state:Boolean(e.form.persona_file),name:"persona_file",placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here..."},model:{value:e.form.persona_file,callback:function(t){e.$set(e.form,"persona_file",t)},expression:"form.persona_file"}})],1),null!=e.form.id?a("div",{attrs:{id:"button-if"}},[a("b-button",{attrs:{type:"reset",variant:"secondary"}},[e._v("Return")]),a("b-button",{attrs:{href:"javascript:void(0)",type:"button",variant:"danger"},on:{click:e.onArchive}},[e._v(" Archive")]),a("b-button",{attrs:{href:"javascript:void(0)",type:"submit",variant:"primary"},on:{click:e.onEdit}},[e._v("Submit Changes")])],1):a("div",{},[a("b-button",{attrs:{type:"button",variant:"primary"},on:{click:e.onAdd}},[e._v("Add New Persona")])],1)])])],1)},N=[],q=(n("a4d3"),n("e01a"),n("d28b"),n("c975"),n("3ca3"),n("ddb0"),n("2b3d"),n("2fa7")),B=(n("96cf"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{key:e.commentKey,staticClass:"container"},[e._l(e.comments,(function(t){return n("div",{key:t.id,staticClass:"col-5"},[null===t.action?n("div",{},[n("span",[e._v(" "+e._s(t.creator_id)+" commented on "+e._s(e._f("formatDate")(t.create_date))+" ")]),n("br"),n("p",{staticClass:"well"},[e._v(" "+e._s(t.comment_body)+" ")])]):n("div",{},[n("i",{staticClass:"fa fa-edit"}),n("span",[e._v(" "+e._s(t.creator_id)+" "+e._s(t.action)+" "+e._s(e._f("formatDate")(t.create_date))+" ")])])])})),n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"collapse-add-comment",expression:"'collapse-add-comment'"}],attrs:{variant:"success"}},[e._v("Add Comment")]),n("b-collapse",{attrs:{id:"collapse-add-comment"}},[n("b-form-textarea",{model:{value:e.form.comment,callback:function(t){e.$set(e.form,"comment",t)},expression:"form.comment"}}),n("b-button",{attrs:{variant:"success"},on:{click:function(t){return e.addComment()}}},[e._v("Submit")])],1)],2)}),M=[],V={data:function(){return{commentKey:0,comments:{},form:{comment:""}}},props:["sourceTable","itemId"],beforeMount:function(){var e=this,t="/api/"+this.sourceTable+"/comments/"+this.itemId;d.a.get(t).then((function(t){e.comments=t.data})).catch((function(e){return console.log(e)}))},mounted:function(){var e=this;u.$on("comments-added",(function(){var t="/api/"+e.sourceTable+"/comments/"+e.itemId;d.a.get(t).then((function(t){e.comments=t.data})).catch((function(e){return console.log(e)}))}))},methods:{formatDate:function(e){if(e)return moment(String(e)).format("MM/DD/YYYY")},addComment:function(){var e,t,n;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return e=null,t={source_id:this.itemId,source_table:this.sourceTable,comment_body:this.form.comment,action:e,downchange:e,upchange:e},n="/api/"+this.sourceTable+"/comments/"+this.itemId,a.next=5,regeneratorRuntime.awrap(d()({method:"post",url:n,data:t}));case 5:a.sent,u.$emit("comments-added",t);case 7:case"end":return a.stop()}}),null,this)}}},K=V,U=Object(h["a"])(K,B,M,!1,null,null,null),L=U.exports,G={name:"persona-details",components:{"comment-view":L},data:function(){return{form:{id:null,name:"",title:"",external:null,market_size:null,quote:"",job_function:"",needs:"",wants:"",pain_point:"",buss_val:null,revision:"",products:[],roles:[],persona_picture:"",persona_file:null},editing:!1,source:"persona",product_options:[],role_options:[],edited_fields:[]}},beforeMount:function(){var e=this;d.a.get("/api/persona/roles").then((function(t){e.role_options=t.data})).catch((function(e){return console.log(e)})),d.a.get("/api/products").then((function(t){e.product_options=t.data})).catch((function(e){return console.log(e)})),u.$on("persona-selection-changed",(function(t){var n="/api/persona-table/";n+=t,d.a.get(n).then((function(n){e.form.id=t,e.form.name=n.data[0].name,e.form.title=n.data[0].title,e.form.external=n.data[0].external,e.form.market_size=n.data[0].market_size,e.form.quote=n.data[0].quote,e.form.job_function=n.data[0].job_function,e.form.needs=n.data[0].needs,e.form.wants=n.data[0].wants,e.form.pain_point=n.data[0].pain_point,e.form.buss_val=n.data[0].buss_val,e.form.revision=n.data[0].revision,e.form.products=n.data[0].products,e.form.roles=n.data[0].roles,e.editing=!1,e.edited_fields.length=0})).catch((function(e){return console.log(e)})),d()({method:"get",url:"/api/persona/files/"+t}).then((function(t){e.uploadedFiles=t.data}))}))},methods:{onInputChanged:function(e){-1===this.edited_fields.indexOf(e)?this.edited_fields.push(e):console.log(this.edited_fields)},onEdit:function(){var e,t,n,a,i,o;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:t=!0,n=!1,a=void 0,r.prev=3,i=this.edited_fields[Symbol.iterator]();case 5:if(t=(o=i.next()).done){r.next=12;break}return e=o.value,r.next=9,regeneratorRuntime.awrap(d()({method:"put",url:"/api/persona-table/"+this.form.id,data:Object(q["a"])({},e,this.form[e])}));case 9:t=!0,r.next=5;break;case 12:r.next=18;break;case 14:r.prev=14,r.t0=r["catch"](3),n=!0,a=r.t0;case 18:r.prev=18,r.prev=19,t||null==i.return||i.return();case 21:if(r.prev=21,!n){r.next=24;break}throw a;case 24:return r.finish(21);case 25:return r.finish(18);case 26:u.$emit("persona-table-changed","item-updated"),document.getElementById("right-sidepanel").style.width="0px";case 29:case"end":return r.stop()}}),null,this,[[3,14,18,26],[19,,21,25]])},onAdd:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(d()({method:"post",url:"/api/persona-table",data:this.form}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})));case 2:u.$emit("persona-table-changed","item-added"),document.getElementById("right-sidepanel").style.width="0px";case 4:case"end":return e.stop()}}),null,this)},onReset:function(){this.editing=!1},onArchive:function(){var e,t;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return e="/api/persona-table/",e+=this.form.id,t={archived:1},console.log(e),n.next=6,regeneratorRuntime.awrap(d()({method:"PUT",url:e,data:t,params:{table:"persona"}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})));case 6:console.log("delete"),u.$emit("persona-table-changed",t),document.getElementById("right-sidepanel").style.width="0px";case 9:case"end":return n.stop()}}),null,this)},getFile:function(e){d()({method:"get",url:"/api/persona/files/"+this.form.id+"?file_id="+e}).then((function(e){var t=window.URL.createObjectURL(new Blob([e.data])),n=document.createElement("a");n.href=t,n.setAttribute("download"),document.body.appendChild(n),n.click(),console.log(e)}))},handleFileUpload:function(){this.file=this.$refs.file.files[0]},submitFiles:function(){var e=new FormData;e.append("file",this.file),e.append("filename","blank"),d()({method:"post",url:"/api/persona/files/"+this.form.id,data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}}},z=G,J=(n("60bc"),n("6a6d"),Object(h["a"])(z,F,N,!1,null,"3d5e8c21",null)),H=J.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container",staticStyle:{"margin-top":"0px"}},[a("div",{staticClass:"md-form mt-0",attrs:{id:"card-search"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search for user persona","aria-label":"Search"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}})]),a("br"),a("b-card-group",{attrs:{columns:""}},e._l(e.filterItems(e.cards),(function(t){return a("b-card",{key:t.id,staticClass:"card"},[a("div",[a("img",{staticClass:"avatar",attrs:{alt:"avatar",src:n("d74c")}})]),a("b-card-text",[a("span",[e._v(" "+e._s(t.name)+" the "+e._s(t.title)+" ")]),a("p",{staticClass:"well"},[e._v(" "+e._s(t.quote)+" ")]),a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"collapse-"+t.id,expression:"'collapse-'+card.id"}],attrs:{variant:"outline-secondary"}},[e._v("More Detail")]),a("b-button",{attrs:{href:"javascript:void(0)",variant:"outline-secondary"},on:{click:function(n){return e.OpenDetail(t.id)}}},[e._v("Open Persona")]),a("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-"+t.id}},[a("label",{attrs:{for:"function"}},[e._v("Job Function")]),a("p",{staticClass:"text-wrap"},[e._v(" "+e._s(t.job_function)+" ")]),a("label",{staticStyle:{"white-space":"pre-line"},attrs:{for:"needs"}},[e._v("Needs")]),a("p",[e._v(" "+e._s(t.needs)+" ")]),a("label",{staticStyle:{"white-space":"pre-line"},attrs:{for:"wants"}},[e._v("Wants")]),a("p",[e._v(" "+e._s(t.wants)+" ")]),a("label",{attrs:{for:"pain_point"}},[e._v("Pain Points")]),a("p",[e._v(" "+e._s(t.pain_point)+" ")])])],1)],1)})),1)],1)},Y=[],W=(n("4de4"),n("4d63"),n("25f0"),n("466d"),n("841c"),{data:function(){return{cards:[],search:""}},beforeMount:function(){var e=this,t="/api/persona-table";d.a.get(t).then((function(t){e.cards=t.data})).catch((function(e){return console.log(e)}))},methods:{OpenDetail:function(e){u.$emit("persona-selection-changed",this.selectedRow=e),this.$router.push("/persona/"+e)},filterItems:function(e){var t=this;return e.filter((function(e){var n=new RegExp("("+t.search+")","i");return JSON.stringify(e).match(n)}))}}}),X=W,Z=(n("516c"),Object(h["a"])(X,Q,Y,!1,null,"acfdb0bc",null)),ee=Z.exports,te={name:"persona-panel",components:{"persona-data":T,"persona-detail":H,"persona-card":ee},data:function(){return{detailKey:0,dataKey:0,view:"card",selection:null}},watch:{$route:function(e,t){document.getElementById("right-sidepanel").style.width="80%",u.$emit("persona-selection-changed",this.selectedRow=this.$route.params.id)}},methods:{expandDetail:function(){document.getElementById("right-sidepanel").style.width="80%"},closeDetail:function(){document.getElementById("right-sidepanel").style.width="0px"},closeNav:function(){document.getElementById("left-sidepanel").style="left: -115px"},addDataAction:function(){this.detailKey+=1,u.$emit("persona-selection-changed",this.selectedRow=null)},changeView:function(e){this.view=e}},mounted:function(){var e=this;u.$on("persona-selection-changed",(function(t){document.getElementById("right-sidepanel").style.width="500px",e.selection=t})),this.$route.params.id&&u.$emit("persona-selection-changed",this.selectedRow=this.$route.params.id)}};var ne=te,ae=(n("a7f6"),Object(h["a"])(ne,D,I,!1,null,"091b4f9f",null)),ie=ae.exports,oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[n("nav",{staticClass:"sidepanel-left",attrs:{id:"left-sidepanel"}},[n("a",{staticClass:"nav-link active",attrs:{href:"javascript:void(0)",id:"Cards"},on:{click:function(t){e.changeView("card"),e.closeNav()}}},[n("i",{staticClass:"fa fa-laptop"})]),n("a",{staticClass:"nav-link active",attrs:{href:"javascript:void(0)",id:"Table"},on:{click:function(t){return e.changeView("table")}}},[n("i",{staticClass:"fa fa-list"})]),null!==this.selection?n("div",[n("a",{staticClass:"nav-link active",attrs:{href:"javascript:void(0)",id:"Detail"},on:{click:function(t){return e.expandDetail()}}},[n("i",{staticClass:"fa fa-align-left"})])]):n("div",[n("a",{staticClass:"nav-link disabled",attrs:{href:"javascript:void(0)",id:"Detail"},on:{click:function(t){return e.expandDetail()}}},[n("i",{staticClass:"fa fa-align-left"})])]),n("a",{staticClass:"nav-link active",attrs:{href:"javascript:void(0)",id:"Add","data-toggle":"tooltip",title:"Add"},on:{click:function(t){e.addDataAction(),e.expandDetail()}}},[n("i",{staticClass:"fa fa-plus"})])]),"table"===e.view?n("div",{key:e.view,staticClass:"container-fluid",attrs:{id:"product-panel"}},[n("div",[n("product-data",{key:e.dataKey})],1)]):e._e(),"card"===e.view?n("div",{key:e.view},[n("product-card",{key:e.dataKey})],1):e._e(),n("div",{staticClass:"sidepanel-right",attrs:{id:"right-sidepanel"}},[n("h1",[n("a",{staticClass:"closebtn",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.closeDetail()}}},[e._v("×")])]),n("div",{attrs:{id:"side-panel-switcher"}},[n("product-detail",{key:e.detailKey})],1)])])},re=[],se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"test-header row",staticStyle:{margin:"15px"}},[n("div",{staticClass:"col-2"},[e._v(" Selection: "),n("span",{attrs:{id:"selectedRows"}}),n("span",{attrs:{selectedRow:e.selectedRow}})]),n("div",{staticClass:"col-2"},[n("span",[e._v(" Search: ")]),n("input",{attrs:{type:"text",id:"filter-text-box",placeholder:"Filter..."},on:{input:function(t){return e.onFilterTextBoxChanged()}}})])]),n("ag-grid-vue",{staticClass:"ag-theme-balham",staticStyle:{width:"100vl",height:"500px"},attrs:{columnDefs:e.columnDefs,rowData:e.rowData,modules:e.modules,rowSelection:"single"},on:{"grid-ready":e.onGridReady,"selection-changed":e.onSelectionChanged}})],1)},le=[],ce={name:"ProductTable",data:function(){return{columnDefs:null,rowData:null,rowSelection:null,gridApi:null,gridOptions:null,modules:S["a"],selectedRow:null,defaultColDef:null}},components:{AgGridVue:A["AgGridVue"]},methods:{onGridReady:function(e){this.gridApi=e.api,this.columnApi=e.columnApi},onSelectionChanged:function(){var e=this.gridApi.getSelectedRows(),t="",n="";e.forEach((function(e,a){0!==a&&(t+=", "),t+=e.name,n=e.id})),document.querySelector("#selectedRows").innerHTML=t,u.$emit("product-selection-changed",this.selectedRow=n)},onFilterTextBoxChanged:function(){this.gridApi.setQuickFilter(document.getElementById("filter-text-box").value)}},beforeMount:function(){var e=this;this.columnDefs=[{headerName:"Name",field:"name",width:200},{headerName:"Description",field:"description",filter:"agTextColumnFilter",width:200},{headerName:"Goals",field:"goals",filter:"agTextColumnFilter",width:400},{headerName:"Features",field:"features",filter:"agTextColumnFilter",width:400},{headerName:"Owner",field:"owner",filter:!0,width:50}],this.defaultColDef={sortable:!0,resizable:!0,filter:!0,getQuickFilterText:function(e){return e.value.name}},this.gridOptions={},this.rowSelection="single",this.gridOptions.rowHeight=100,fetch("/api/product-table").then((function(e){return e.json()})).then((function(t){return e.rowData=t}))},mounted:function(){var e=this;u.$on("product-table-changed",(function(t){fetch("/api/product-table").then((function(e){return e.json()})).then((function(t){return e.rowData=t}))}))}},de=ce,ue=Object(h["a"])(de,se,le,!1,null,null,null),pe=ue.exports,fe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"padding-right":"15px","margin-left":"15px"}},[n("b-form",{attrs:{id:"product-detail"},on:{submit:e.onEdit,reset:e.onReset,archive:e.onArchive}},[!1===e.editing&&null!==e.form.id?n("div",{attrs:{id:"product-detail-show"}},[n("h1",[e._v("Detail")]),n("span",[e._v(" Product ID: "+e._s(e.form.id)+" | Revision: "+e._s(e.form.revision)+" ")]),n("div",[n("label",[e._v("Name")]),n("p",{staticClass:"text-wrap"},[e._v(" "+e._s(e.form.name)+" ")]),n("label",[e._v("Description")]),n("p",{staticClass:"text-wrap"},[e._v(" "+e._s(e.form.description)+" ")]),""!==e.form.metrics?n("div",[n("label",[e._v("Metrics")]),n("p",{staticClass:"text-wrap"},[e._v(" "+e._s(e.form.metrics)+" ")])]):e._e(),""!==e.form.features?n("div",[n("label",[e._v("Product Features")]),n("p",{staticClass:"text-wrap"},[e._v(" "+e._s(e.form.features)+" ")])]):e._e(),""!==e.form.goals?n("div",[n("label",[e._v("Goals")]),n("p",{staticClass:"text-wrap"},[e._v(" "+e._s(e.form.goals)+" ")])]):e._e(),n("label",{attrs:{for:"function"}},[e._v("Owner")]),n("p",{staticClass:"text-wrap"},[e._v(" "+e._s(e.form.owner)+" ")]),n("label",[e._v("Product Homepage")]),n("p",[e._v(" "+e._s(e.form.product_homepage)+" ")]),n("br"),n("label",[e._v("Personas: ")]),e._l(e.form.personas,(function(t){return n("div",{key:t.id},[n("b-button",{attrs:{to:"/persona/"+t.id,pill:"",variant:"info"}},[e._v(e._s(t.title)+" ")])],1)}))],2),n("hr"),n("b-button",{attrs:{href:"javascript:void(0)"},on:{click:function(t){e.editing=!0}}},[e._v("Edit")]),n("hr"),n("h4",[e._v("Comments")]),n("comment-view",{key:e.form.id,attrs:{sourceTable:e.source,itemId:e.form.id}})],1):n("div",{attrs:{id:"product-detail-edit"}},[null!==e.form.id?n("h1",[e._v("Edit")]):n("h1",[e._v("Add")]),n("div",[n("label",[e._v("Name")]),n("b-form-input",{on:{change:function(t){return e.onInputChanged("name")}},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),n("label",[e._v("Description")]),n("b-form-textarea",{on:{change:function(t){return e.onInputChanged("description")}},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),n("label",[e._v("Metrics")]),n("b-form-textarea",{on:{change:function(t){return e.onInputChanged("metrics")}},model:{value:e.form.metrics,callback:function(t){e.$set(e.form,"metrics",t)},expression:"form.metrics"}}),n("label",[e._v("Product Features")]),n("b-form-textarea",{on:{change:function(t){return e.onInputChanged("features")}},model:{value:e.form.features,callback:function(t){e.$set(e.form,"features",t)},expression:"form.features"}}),n("label",[e._v("Goals")]),n("b-form-input",{on:{change:function(t){return e.onInputChanged("goals")}},model:{value:e.form.goals,callback:function(t){e.$set(e.form,"goals",t)},expression:"form.goals"}}),n("label",{attrs:{for:"function"}},[e._v("Owner")]),n("b-form-input",{on:{change:function(t){return e.onInputChanged("owner")}},model:{value:e.form.owner,callback:function(t){e.$set(e.form,"owner",t)},expression:"form.owner"}}),n("label",[e._v("Product Homepage")]),n("b-form-input",{on:{change:function(t){return e.onInputChanged("product_homepage")}},model:{value:e.form.product_homepage,callback:function(t){e.$set(e.form,"product_homepage",t)},expression:"form.product_homepage"}}),n("br"),n("label",[e._v("Choose Personas")]),n("multiselect",{attrs:{options:e.persona_options,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"title","track-by":"id","preselect-first":!1},on:{change:function(t){return e.onInputChanged("personas")}},scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.values,i=(t.search,t.isOpen);return[a.length&&!i?n("span",{staticClass:"multiselect__single"},[e._v(" "+e._s(a.length)+" options selected ")]):e._e()]}}]),model:{value:e.form.personas,callback:function(t){e.$set(e.form,"personas",t)},expression:"form.personas"}}),n("br"),n("div",[e._v("Selected: "),n("strong",[e._v(e._s(e.form.personas.title))])])],1),n("div",[n("label",{attrs:{for:"product_file"}},[e._v("Add File")]),n("b-form-file",{attrs:{state:Boolean(e.form.product_file),name:"product_file",placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here..."},model:{value:e.form.product_file,callback:function(t){e.$set(e.form,"product_file",t)},expression:"form.product_file"}})],1),n("br"),null!=e.form.id?n("div",{attrs:{id:"button-if"}},[n("b-button",{attrs:{type:"reset",variant:"secondary"}},[e._v("Return")]),n("b-button",{attrs:{href:"javascript:void(0)",type:"button",variant:"danger"},on:{click:e.onArchive}},[e._v(" Archive")]),n("b-button",{attrs:{href:"javascript:void(0)",type:"submit",variant:"primary"},on:{click:e.onEdit}},[e._v("Submit Changes")])],1):n("div",{},[n("b-button",{attrs:{type:"submit",variant:"primary"},on:{click:e.onAdd}},[e._v(" Add New Product")])],1)])])],1)},me=[],he={name:"product-details",components:{"comment-view":L},data:function(){return{form:{id:null,name:"",description:"",metrics:"",features:"",goals:"",owner:"",product_homepage:"",personas:[],products:[],product_photo:"",product_file:null},editing:!1,source:"product",persona_options:[],edited_fields:[]}},beforeMount:function(){var e=this;d.a.get("/api/personas").then((function(t){e.persona_options=t.data})).catch((function(e){return console.log(e)})),u.$on("product-selection-changed",(function(t){var n="/api/product-table/";n+=t,d.a.get(n).then((function(n){e.form.id=t,e.form.name=n.data[0].name,e.form.description=n.data[0].description,e.form.metrics=n.data[0].metrics,e.form.goals=n.data[0].goals,e.form.features=n.data[0].features,e.form.owner=n.data[0].owner,e.form.product_homepage=n.data[0].product_homepage,e.form.revision=n.data[0].revision,e.form.personas=n.data[0].personas,e.editing=!1,e.edited_fields.length=0})).catch((function(e){return console.log(e)}))}))},methods:{onInputChanged:function(e){-1===this.edited_fields.indexOf(e)?this.edited_fields.push(e):console.log(this.edited_fields)},onEdit:function(){var e,t,n,a,i,o;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:t=!0,n=!1,a=void 0,r.prev=3,i=this.edited_fields[Symbol.iterator]();case 5:if(t=(o=i.next()).done){r.next=12;break}return e=o.value,r.next=9,regeneratorRuntime.awrap(d()({method:"put",url:"/api/product-table/"+this.form.id,data:Object(q["a"])({},e,this.form[e])}));case 9:t=!0,r.next=5;break;case 12:r.next=18;break;case 14:r.prev=14,r.t0=r["catch"](3),n=!0,a=r.t0;case 18:r.prev=18,r.prev=19,t||null==i.return||i.return();case 21:if(r.prev=21,!n){r.next=24;break}throw a;case 24:return r.finish(21);case 25:return r.finish(18);case 26:u.$emit("product-table-changed","item-updated"),document.getElementById("right-sidepanel").style.width="0px";case 29:case"end":return r.stop()}}),null,this,[[3,14,18,26],[19,,21,25]])},onAdd:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,regeneratorRuntime.awrap(d()({method:"post",url:"/api/product-table",data:this.form}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})));case 3:u.$emit("product-table-changed","item-updated"),document.getElementById("right-sidepanel").style.width="0px";case 5:case"end":return t.stop()}}),null,this)},onReset:function(e){e.preventDefault(),this.editing=!1},onArchive:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return e.preventDefault(),t.next=3,regeneratorRuntime.awrap(d()({method:"put",url:"/api/product-table/"+this.form.id,data:{id:this.form.id,archived:1}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})));case 3:u.$emit("product-table-changed","data archived"),document.getElementById("right-sidepanel").style.width="0px";case 5:case"end":return t.stop()}}),null,this)}}},ve=he,ge=(n("b0d4"),Object(h["a"])(ve,fe,me,!1,null,"157d6ea4",null)),be=ge.exports,_e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"md-form mt-0",attrs:{id:"card-search"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search for product","aria-label":"Search"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}})]),n("br"),n("b-card-group",{attrs:{columns:""}},e._l(e.filterItems(e.cards),(function(t){return n("b-card",{key:t.name,staticClass:"card"},[n("b-card-text",[n("h5",{staticStyle:{"text-align":"center"}},[e._v(e._s(t.name))]),n("p",{staticClass:"well"},[e._v(" "+e._s(t.description)+" ")]),n("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"collapse-"+t.id,expression:"'collapse-'+card.id"}],attrs:{variant:"outline-secondary"}},[e._v("More Detail")]),n("b-button",{attrs:{href:"javascript:void(0)",variant:"outline-secondary"},on:{click:function(n){return e.OpenDetail(t.id)}}},[e._v("Open Product")]),n("b-collapse",{staticClass:"mt-2",attrs:{id:"collapse-"+t.id}},[n("label",[e._v("Product Goals")]),n("p",{staticClass:"text-wrap"},[e._v(" "+e._s(t.goals)+" ")]),n("label",[e._v("Features")]),n("p",[e._v(" "+e._s(t.features)+" ")]),n("label",[e._v("Owner")]),n("p",[e._v(" "+e._s(t.owner)+" ")]),n("label",[e._v("Product Home Page")]),n("p",[e._v(" "+e._s(t.product_homepage)+" ")])])],1)],1)})),1)],1)},we=[],xe={data:function(){return{cards:[],search:""}},beforeMount:function(){var e=this,t="/api/product-table";d.a.get(t).then((function(t){e.cards=t.data})).catch((function(e){return console.log(e)}))},methods:{OpenDetail:function(e){u.$emit("product-selection-changed",this.selectedRow=e)},filterItems:function(e){var t=this;return e.filter((function(e){var n=new RegExp("("+t.search+")","i");return JSON.stringify(e).match(n)}))}}},ye=xe,Ce=Object(h["a"])(ye,_e,we,!1,null,null,null),ke=Ce.exports,$e={name:"product-panel",components:{"product-data":pe,"product-detail":be,"product-card":ke},data:function(){return{detailKey:0,dataKey:0,view:"card",selection:null}},watch:{$route:function(e,t){u.$emit("product-selection-changed",this.selectedRow=this.$route.params.id)}},methods:{expandDetail:function(){document.getElementById("right-sidepanel").style.width="80%"},closeDetail:function(){document.getElementById("right-sidepanel").style.width="0px"},closeNav:function(){document.getElementById("right-sidepanel").style.width="0px"},addDataAction:function(){this.detailKey+=1,u.$emit("product-selection-changed",this.selectedRow=null)},changeView:function(e){this.view=e}},mounted:function(){var e=this;u.$on("product-selection-changed",(function(t){document.getElementById("right-sidepanel").style.width="500px",e.selection=t})),this.$route.params.id&&u.$emit("product-selection-changed",this.selectedRow=this.$route.params.id)}},De=$e,Ie=(n("5a88"),Object(h["a"])(De,oe,re,!1,null,null,null)),je=Ie.exports,Re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[n("nav",{staticClass:"sidepanel-left",attrs:{id:"left-sidepanel"}},[n("a",{staticClass:"nav-link active",attrs:{href:"javascript:void(0)",id:"Cards"},on:{click:function(t){e.changeView("card"),e.closeNav()}}},[n("i",{staticClass:"fa fa-exclamation"})]),null!==this.selection?n("div",[n("a",{staticClass:"nav-link active",attrs:{href:"javascript:void(0)",id:"Detail"},on:{click:function(t){return e.expandDetail()}}},[n("i",{staticClass:"fa fa-align-left"})])]):n("div",[n("a",{staticClass:"nav-link disabled",attrs:{href:"javascript:void(0)",id:"Detail"},on:{click:function(t){return e.expandDetail()}}},[n("i",{staticClass:"fa fa-align-left"})])]),n("a",{staticClass:"nav-link active",attrs:{href:"javascript:void(0)",id:"Add","data-toggle":"tooltip",title:"Add"},on:{click:function(t){e.addDataAction(),e.expandDetail()}}},[n("i",{staticClass:"fa fa-plus"})]),n("a",{staticClass:"nav-link disabled",attrs:{href:"javascript:void(0)",id:"Dashboard"},on:{click:function(t){return e.expandDetail()}}},[n("i",{staticClass:"fas fa-chart-line"})])]),"card"===e.view?n("div",{key:e.view},[n("insight-card",{key:e.dataKey},[e._v(">")])],1):e._e(),n("div",{staticClass:"sidepanel-right",attrs:{id:"right-sidepanel"}},[n("h1",[n("a",{staticClass:"closebtn",attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.closeDetail()}}},[e._v("×")])]),n("div",{attrs:{id:"side-panel-switcher"}},[n("insight-detail",{key:e.detailKey})],1)])])},Ae=[],Se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"padding-right":"15px","margin-left":"15px"}},[n("b-form",{attrs:{id:"persona-detail"},on:{submit:e.onEdit,reset:e.onReset,archive:e.onArchive}},[!1===e.editing&&null!==e.form.id?n("div",{attrs:{id:"persona-detail-show"}},[n("h1",[e._v("Insight Detail")]),n("div",{},[n("label",[e._v("Title")]),n("p",{staticClass:"text-wrap"},[e._v(" "+e._s(e.form.title)+" ")]),n("label",[e._v("description")]),n("p",{staticClass:"text-wrap"},[e._v(" "+e._s(e.form.description)+" ")]),n("label",[e._v("Content")]),n("p",{staticClass:"text-wrap"},[e._v(" "+e._s(e.form.content)+" ")]),n("label",[e._v("Experience vector")]),n("br"),n("span",{staticClass:"badge badge-pill badge-success",class:e.form.experience_vector},[e._v(" "+e._s(e.form.experience_vector))]),n("br"),n("label",[e._v("Magnitude")]),n("div",{staticClass:"barcont"},[n("div",{staticClass:"bar magnitude",style:{width:e.form.magnitude/5*100+"%"}},[e._v(e._s(e.form.magnitude))])]),n("label",[e._v("Frequency")]),n("div",{staticClass:"barcont"},[n("div",{staticClass:"bar frequency",style:{width:e.form.frequency/5*100+"%"}},[e._v(e._s(e.form.frequency))])]),n("label",[e._v("Emotions")]),n("p",{staticClass:"text-wrap"},[e._v(" "+e._s(e.form.emotions)+" ")]),n("label",[e._v("Props")]),n("p",{staticClass:"text-wrap"},[e._v(" "+e._s(e.form.props)+" ")]),n("label",[e._v("Journey Location")]),n("p",{staticClass:"text-wrap"},[e._v(" "+e._s(e.form.journey)+" ")]),n("label",[e._v("Associated Personas")]),e._l(e.form.personas,(function(t){return n("div",{key:t.id},[n("b-badge",{attrs:{to:{path:"persona/"+t.id},pill:"",variant:"success"}},[e._v(e._s(t.title)+" ")])],1)})),n("br"),n("label",[e._v("Associated products")]),e._l(e.form.products,(function(t){return n("div",{key:t.id},[n("b-badge",{attrs:{to:{path:"product/"+t.id},pill:"",variant:"success"}},[e._v(e._s(t.name))])],1)}))],2),n("br"),n("b-button",{attrs:{href:"javascript:void(0)"},on:{click:function(t){e.editing=!0}}},[e._v("Edit")]),n("hr"),n("h4",[e._v("Comments")]),n("comment-view",{attrs:{sourceTable:e.source,itemId:e.form.id}})],1):n("div",{attrs:{id:"persona-detail-edit"}},[null===e.form.id?n("h1",[e._v("Add")]):n("h1",[e._v("Edit")]),n("div",[n("label",[e._v("Title")]),n("b-form-input",{attrs:{id:"Title",name:"Title"},on:{change:function(t){return e.onInputChanged("title")}},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}}),n("div",{directives:[{name:"b-toggle",rawName:"v-b-toggle",value:"collapse-description",expression:"'collapse-description'"}],staticClass:"m-1",attrs:{variant:"light"}},[n("label",[e._v("description")])]),n("b-collapse",{attrs:{id:"collapse-description"}},[n("b-form-input",{attrs:{id:"description",name:"description"},on:{change:function(t){return e.onInputChanged("description")}},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1),n("label",[e._v("content")]),n("b-form-textarea",{attrs:{id:"content",name:"content"},on:{change:function(t){return e.onInputChanged("content")}},model:{value:e.form.content,callback:function(t){e.$set(e.form,"content",t)},expression:"form.content"}}),n("label",[e._v("Experience vector")]),n("b-form-select",{attrs:{options:e.experience_options,id:"experience_vector",name:"experience_vector"},on:{change:function(t){return e.onInputChanged("experience_vector")}},model:{value:e.form.experience_vector,callback:function(t){e.$set(e.form,"experience_vector",t)},expression:"form.experience_vector"}}),n("label",[e._v("Magnitude: "+e._s(e.form.magnitude))]),n("b-form-input",{attrs:{type:"range",min:"0",max:"5",id:"magnitude",name:"magnitude"},on:{change:function(t){return e.onInputChanged("magnitude")}},model:{value:e.form.magnitude,callback:function(t){e.$set(e.form,"magnitude",t)},expression:"form.magnitude"}}),n("label",[e._v("Frequency: "+e._s(e.form.frequency))]),n("b-form-input",{attrs:{type:"range",min:"0",max:"5",id:"frequency",name:"frequency"},on:{change:function(t){return e.onInputChanged("frequency")}},model:{value:e.form.frequency,callback:function(t){e.$set(e.form,"frequency",t)},expression:"form.frequency"}}),n("label",[e._v("Emotions")]),n("b-form-select",{attrs:{id:"emotions",options:e.emotion_options,name:"emotions"},on:{change:function(t){return e.onInputChanged("emotions")}},model:{value:e.form.emotions,callback:function(t){e.$set(e.form,"emotions",t)},expression:"form.emotions"}}),n("label",[e._v("Props")]),n("b-form-textarea",{attrs:{id:"props",name:"props"},on:{change:function(t){return e.onInputChanged("props")}},model:{value:e.form.props,callback:function(t){e.$set(e.form,"props",t)},expression:"form.props"}}),n("label",[e._v("Journey Location")]),n("b-form-select",{attrs:{id:"journey",options:e.journey_options,name:"journey"},on:{change:function(t){return e.onInputChanged("journey")}},model:{value:e.form.journey,callback:function(t){e.$set(e.form,"journey",t)},expression:"form.journey"}}),n("div",{staticClass:"large-12 medium-12 small-12 cell"},[n("label",[e._v("Files "),n("input",{ref:"files",attrs:{type:"file",id:"files",multiple:""},on:{change:function(t){return e.handleFilesUpload()}}})]),n("button",{attrs:{href:"javascript:void(0)"},on:{click:function(t){return e.submitFiles()}}},[e._v("Submit")])]),n("br"),n("label",{attrs:{for:"persona-select"}},[e._v("Choose Personas: ")]),n("br"),n("multiselect",{attrs:{options:e.persona_options,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"persona_title","track-by":"persona_id","preselect-first":!1},on:{input:function(t){return e.onInputChanged("personas")}},scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.values,i=(t.search,t.isOpen);return[a.length&&!i?n("span",{staticClass:"multiselect__single"},[e._v(" "+e._s(a.length)+" options selected ")]):e._e()]}}]),model:{value:e.form.personas,callback:function(t){e.$set(e.form,"personas",t)},expression:"form.personas"}}),n("label",{attrs:{for:"product-select"}},[e._v("Product: ")]),n("br"),n("label",[e._v("Choose Products")]),n("multiselect",{attrs:{options:e.product_options,multiple:!0,"close-on-select":!1,"clear-on-select":!1,"preserve-search":!0,placeholder:"Pick some",label:"product_name","track-by":"product_id","preselect-first":!1},on:{input:function(t){return e.onInputChanged("products")}},scopedSlots:e._u([{key:"selection",fn:function(t){var a=t.values,i=(t.search,t.isOpen);return[a.length&&!i?n("span",{staticClass:"multiselect__single"},[e._v(" "+e._s(a.length)+" options selected ")]):e._e()]}}]),model:{value:e.form.products,callback:function(t){e.$set(e.form,"products",t)},expression:"form.products"}}),n("br")],1),n("div",[n("label",{attrs:{for:"file"}},[e._v("Add File")]),n("b-form-file",{attrs:{state:Boolean(e.form.file),name:"file",placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here..."},model:{value:e.form.file,callback:function(t){e.$set(e.form,"file",t)},expression:"form.file"}})],1),null!=e.form.id?n("div",{attrs:{id:"button-if"}},[n("b-button",{attrs:{type:"reset",variant:"secondary"}},[e._v("Return")]),n("b-button",{attrs:{href:"javascript:void(0)",type:"button",variant:"danger"},on:{click:e.onArchive}},[e._v(" Archive")]),n("b-button",{attrs:{href:"javascript:void(0)",type:"submit",variant:"primary"},on:{click:e.onEdit}},[e._v("Submit Changes")])],1):n("div",{},[n("b-button",{attrs:{type:"button",variant:"primary"},on:{click:e.onAdd}},[e._v("Add New Persona")])],1)])])],1)},Ee=[],Pe={name:"insight-details",components:{"comment-view":L},data:function(){return{form:{id:null,title:"",description:"",content:"",file:null,experience_vector:"Neutral",magnitude:null,frequency:null,emotions:null,props:"",journey:"",creator_id:null,revision:null,products:[],personas:[]},editing:!1,source:"insights",experience_options:["Positive","Neutral","Negative"],emotion_options:["Pain","Joyful","Triumphiant","Angry","Calm","Frustrated","Surprised","Excited"],journey_options:["Aware","Try","Use","Leave"],product_options:[],persona_options:[],edited_fields:[]}},beforeMount:function(){var e=this;d.a.get("/api/products").then((function(t){e.product_options=t.data})),d.a.get("/api/personas").then((function(t){e.persona_options=t.data})),u.$on("insight-selection-changed",(function(t){if(null!==t){var n="/api/insights/";n+=t,d.a.get(n).then((function(n){e.form.id=t,e.form.title=n.data[0].title,e.form.description=n.data[0].description,e.form.content=n.data[0].content,e.form.experience_vector=n.data[0].experience_vector,e.form.magnitude=n.data[0].magnitude,e.form.frequency=n.data[0].frequency,e.form.emotions=n.data[0].emotions,e.form.props=n.data[0].props,e.form.journey=n.data[0].journey,e.form.personas=n.data[0].personas,e.form.products=n.data[0].products,e.editing=!1,e.edited_fields.length=0})).catch((function(e){return console.log(e)}))}}))},methods:{onInputChanged:function(e){-1===this.edited_fields.indexOf(e)?this.edited_fields.push(e):console.log(this.edited_fields)},submitFiles:function(){for(var e=new FormData,t=0;t<this.files.length;t++){var n=this.files[t];e.append("files["+t+"]",n)}d.a.post("/api/insights/files",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){console.log("SUCCESS!!")})).catch((function(){console.log("FAILURE!!")}))},handleFilesUpload:function(){this.files=this.$refs.files.files},onEdit:function(){var e,t,n,a,i,o;return regeneratorRuntime.async((function(r){while(1)switch(r.prev=r.next){case 0:t=!0,n=!1,a=void 0,r.prev=3,i=this.edited_fields[Symbol.iterator]();case 5:if(t=(o=i.next()).done){r.next=23;break}if(e=o.value,!e.match("products")){r.next=12;break}return r.next=10,regeneratorRuntime.awrap(d()({method:"post",url:"/api/insights/"+this.form.id+"/products",data:this.form.products}));case 10:r.next=19;break;case 12:if(!e.match("personas")){r.next=17;break}return r.next=15,regeneratorRuntime.awrap(d()({method:"post",url:"/api/insights/"+this.form.id+"/personas",data:this.form.personas}));case 15:r.next=19;break;case 17:return r.next=19,regeneratorRuntime.awrap(d()({method:"put",url:"/api/insights/"+this.form.id,data:{id:this.form.id}}));case 19:case 20:t=!0,r.next=5;break;case 23:r.next=29;break;case 25:r.prev=25,r.t0=r["catch"](3),n=!0,a=r.t0;case 29:r.prev=29,r.prev=30,t||null==i.return||i.return();case 32:if(r.prev=32,!n){r.next=35;break}throw a;case 35:return r.finish(32);case 36:return r.finish(29);case 37:u.$emit("insight-data-changed","item-updated"),document.getElementById("right-sidepanel").style.width="0px";case 40:case"end":return r.stop()}}),null,this,[[3,25,29,37],[30,,32,36]])},onAdd:function(){return regeneratorRuntime.async((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,regeneratorRuntime.awrap(d()({method:"post",url:"/api/insights",data:this.form}));case 2:if(!Array.isArray(this.edited_fields.length)){e.next=11;break}if(!this.edited_fields.match("products")){e.next=8;break}return e.next=6,regeneratorRuntime.awrap(d()({method:"post",url:"/api/insights/"+this.form.id+"/products",data:this.form.products}));case 6:e.next=11;break;case 8:if(!this.edited_fields.match("personas")){e.next=11;break}return e.next=11,regeneratorRuntime.awrap(d()({method:"post",url:"/api/insights/"+this.form.id+"/personas",data:this.form.personas}));case 11:u.$emit("insight-data-changed","item-updated"),document.getElementById("right-sidepanel").style.width="0px";case 13:case"end":return e.stop()}}),null,this)},onReset:function(){this.editing=!1},onArchive:function(){var e,t;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:return e="/api/insights/",e+=this.form.id,t={archived:1},console.log(e),n.next=6,regeneratorRuntime.awrap(d()({method:"PUT",url:e,data:t,params:{table:"insights"}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})));case 6:console.log("delete"),u.$emit("insight-data-changed",t),document.getElementById("right-sidepanel").style.width="0px";case 9:case"end":return n.stop()}}),null,this)}}},Oe=Pe,Te=(n("694d"),Object(h["a"])(Oe,Se,Ee,!1,null,"35457fe7",null)),Fe=Te.exports,Ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container",staticStyle:{"margin-top":"0px"}},[n("div",{staticClass:"md-form mt-0",attrs:{id:"card-search"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search for user insight","aria-label":"Search"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}})]),n("br"),n("b-card-group",{attrs:{columns:""}},e._l(e.filterItems(e.cards),(function(t){return n("b-card",{key:t.name,staticClass:"card"},[n("b-card-text",[n("q",[e._v(e._s(t.title))]),n("br"),n("span",{staticClass:"badge badge-pill badge-success",class:t.experience_vector},[e._v(" "+e._s(t.experience_vector))]),n("b-button",{attrs:{href:"javascript:void(0)",variant:"outline-secondary"},on:{click:function(n){return e.OpenDetail(t.id)}}},[e._v("Open insight")])],1)],1)})),1)],1)},qe=[],Be={data:function(){return{cards:[],search:"",columns:4}},beforeCreate:function(){var e=this,t="/api/insights";d.a.get(t).then((function(t){e.cards=t.data})).catch((function(e){return console.log(e)}))},methods:{OpenDetail:function(e){u.$emit("insight-selection-changed",this.selectedRow=e)},filterItems:function(e){var t=this;return e.filter((function(e){var n=new RegExp("("+t.search+")","i");return JSON.stringify(e).match(n)}))}}},Me=Be,Ve=(n("bf9b"),Object(h["a"])(Me,Ne,qe,!1,null,"15bc6dfa",null)),Ke=Ve.exports,Ue={name:"insight-panel",components:{"insight-detail":Fe,"insight-card":Ke},data:function(){return{detailKey:0,dataKey:0,view:"card",selection:null}},watch:{"$route.params.id ":function(e,t){u.$emit("insight-selection-changed",this.selectedRow=this.$route.params.id)}},methods:{expandDetail:function(){document.getElementById("right-sidepanel").style.width="80%"},closeDetail:function(){document.getElementById("right-sidepanel").style.width="0px"},closeNav:function(){document.getElementById("left-sidepanel").style="left: -115px"},addDataAction:function(){this.detailKey+=1,u.$emit("insight-selection-changed",this.selectedRow=null)},changeView:function(e){this.view=e},getFile:function(e){var t=this;d()({method:"get",url:"/api/insights/1/files"}).then((function(e){t.image="data:image/jpeg;base64,"+e.data[0],console.log(e)}))},handleFileUpload:function(){this.file=this.$refs.file.files[0]},submitFiles:function(){var e=new FormData;e.append("file",this.file),e.append("filename","blank"),d()({method:"post",url:"/api/insights/1/files",data:e,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){console.log(e)})).catch((function(e){console.log(e)}))}},mounted:function(){var e=this;u.$on("insight-selection-changed",(function(t){document.getElementById("right-sidepanel").style.width="500px",e.selection=t})),u.$on("insight-data-changed",(function(t){e.dataKey=1})),this.$route.params.id&&u.$emit("insight-selection-changed",this.selectedRow=this.$route.params.id)}};var Le=Ue,Ge=(n("c6ed"),Object(h["a"])(Le,Re,Ae,!1,null,"4ba28e5d",null)),ze=Ge.exports,Je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("h1",[e._v("Admin Page")]),n("div",{staticClass:"test-header row",staticStyle:{margin:"15px"}},[n("div",{staticClass:"col-2"},[e._v(" Selection: "),n("span",{attrs:{id:"selectedRows"}}),n("span",{attrs:{selectedRow:e.selectedRow}})]),n("div",{staticClass:"col-2"},[n("span",[e._v(" Search: ")]),n("input",{attrs:{type:"text",id:"filter-text-box",placeholder:"Filter..."},on:{input:function(t){return e.onFilterTextBoxChanged()}}})])]),n("ag-grid-vue",{staticClass:"ag-theme-balham",staticStyle:{width:"100vl",height:"500px"},attrs:{columnDefs:e.columnDefs,rowData:e.rowData,modules:e.modules,rowSelection:"single"},on:{"grid-ready":e.onGridReady,"selection-changed":e.onSelectionChanged,"cell-value-changed":e.onCellValueChanged}})],1)},He=[],Qe={name:"ProductTable",data:function(){return{columnDefs:null,rowData:null,rowSelection:null,gridApi:null,gridOptions:null,modules:S["a"],selectedRow:null,defaultColDef:null}},components:{AgGridVue:A["AgGridVue"]},methods:{onGridReady:function(e){this.gridApi=e.api,this.columnApi=e.columnApi},onSelectionChanged:function(){var e=this.gridApi.getSelectedRows(),t="",n="";e.forEach((function(e,a){0!==a&&(t+=", "),t+=e.name,n=e.id})),document.querySelector("#selectedRows").innerHTML=t,u.$emit("product-selection-changed",this.selectedRow=n)},onFilterTextBoxChanged:function(){this.gridApi.setQuickFilter(document.getElementById("filter-text-box").value)},onCellValueChanged:function(e){return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(e.data.username,e.data.role,p.state.role),t.next=3,regeneratorRuntime.awrap(d()({method:"put",url:"/api/users/admin",data:{username:e.data.username,role:e.data.role,admin:this.$store.state.role}}));case 3:case"end":return t.stop()}}),null,this)}},beforeMount:function(){var e=this;this.columnDefs=[{headerName:"User ID",field:"user_id",width:200},{headerName:"Username",field:"username",filter:"agTextColumnFilter",width:200},{headerName:"Role",field:"role",filter:"agTextColumnFilter",width:400,editable:!0}],this.defaultColDef={sortable:!0,resizable:!0,filter:!0,getQuickFilterText:function(e){return e.value.name}},this.gridOptions={},this.rowSelection="single",this.gridOptions.rowHeight=100,fetch("/api/users").then((function(e){return e.json()})).then((function(t){return e.rowData=t}))},mounted:function(){var e=this;u.$on("product-table-changed",(function(t){fetch("/api/users").then((function(e){return e.json()})).then((function(t){return e.rowData=t}))}))}},Ye=Qe,We=Object(h["a"])(Ye,Je,He,!1,null,null,null),Xe=We.exports,Ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-alert",{attrs:{show:!1===this.$store.state.authenticated,variant:"info",dismissible:""}},[e._v(" Please log in.. ")]),n("b-alert",{attrs:{variant:e.alert.variant,dismissible:""},model:{value:e.alert.show,callback:function(t){e.$set(e.alert,"show",t)},expression:"alert.show"}},[e._v(" "+e._s(e.alert.text)+" ")]),"login"===e.form_mode?n("div",{attrs:{id:"login"}},[n("h1",[e._v("Login")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.input.username,expression:"input.username"}],attrs:{required:"",type:"text",name:"username",placeholder:"Email"},domProps:{value:e.input.username},on:{input:function(t){t.target.composing||e.$set(e.input,"username",t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.input.password,expression:"input.password"}],attrs:{required:"",id:"password",type:"password",name:"password",placeholder:"Password"},domProps:{value:e.input.password},on:{input:function(t){t.target.composing||e.$set(e.input,"password",t.target.value)}}}),n("div",{staticClass:"row"},[n("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(t){return e.login()}}},[e._v("login")]),n("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(t){return e.changeView("register")}}},[e._v("register")]),n("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(t){return e.changeView("reset_password")}}},[e._v("reset password")])])]):"register"===e.form_mode?n("div",{attrs:{id:"login"}},[n("h1",[e._v("Register")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.input.username,expression:"input.username"}],attrs:{type:"text",name:"username",placeholder:"Email"},domProps:{value:e.input.username},on:{input:function(t){t.target.composing||e.$set(e.input,"username",t.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.input.password,expression:"input.password"}],attrs:{id:"password",type:"password",name:"password",placeholder:"Password"},domProps:{value:e.input.password},on:{input:function(t){t.target.composing||e.$set(e.input,"password",t.target.value)}}}),n("div",{staticClass:"row"},[n("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(t){return e.changeView("login")}}},[e._v("cancel")]),n("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(t){return e.register()}}},[e._v("register")])])]):"reset_password"===e.form_mode?n("div",{attrs:{id:"login"}},[n("h1",[e._v("Reset Password")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.input.username,expression:"input.username"}],attrs:{type:"text",name:"username",placeholder:"Email"},domProps:{value:e.input.username},on:{input:function(t){t.target.composing||e.$set(e.input,"username",t.target.value)}}}),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.input.password,expression:"input.password"}],attrs:{id:"password",type:"password",name:"password",placeholder:"Current Password"},domProps:{value:e.input.password},on:{input:function(t){t.target.composing||e.$set(e.input,"password",t.target.value)}}}),n("br"),n("input",{directives:[{name:"model",rawName:"v-model",value:e.input.new_password,expression:"input.new_password"}],attrs:{type:"password",name:"password",placeholder:"New Password"},domProps:{value:e.input.new_password},on:{input:function(t){t.target.composing||e.$set(e.input,"new_password",t.target.value)}}}),n("br"),n("div",{staticClass:"row"},[n("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(t){return e.changeView("login")}}},[e._v("back")]),n("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(t){return e.changeView("reset_password")}}},[e._v("reset password")]),n("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(t){return e.changeView("reset_password")}}},[e._v("forgot password?")])])]):e._e()],1)},et=[],tt=(n("caad"),n("2532"),{name:"Login",data:function(){return{input:{username:"",password:"",new_password:""},alert:{show:!1,text:"",variant:"danger"},form_mode:"login"}},methods:{changeView:function(e){this.form_mode=e},login:function(){var e=this,t=this.input.username,n=this.input.password;this.$store.dispatch("login",{username:t,password:n}).then((function(t){e.alert.show=!0,e.alert.text="logged in...",e.alert.variant="success",e.$router.push("/")})).catch((function(t){console.log(t),e.alert.show=!0,e.alert.text="The username and / or password is incorrect",e.alert.variant="danger",console.log("The username and / or password is incorrect")}))},register:function(){var e=this;""!=this.input.username&&""!=this.input.password&&this.input.username.includes("utc.com")?(d()({method:"post",url:"/api/users",data:e.input,header:{"Content-Type":"application/json"}}).then((function(t){console.log(t),e.input.authenticated=t.data[0].authenticated})).catch((function(e){console.log(e)})),this.form_mode="login",this.alert.show=!0,this.alert.text="Succesfully registered, please login...",this.alert.variant="success"):(this.alert.show=!0,this.alert.text="A UTC email must be definied",this.alert.variant="danger")},reset_password:function(){}}}),nt=tt,at=(n("e835"),Object(h["a"])(nt,Ze,et,!1,null,"011ba218",null)),it=at.exports,ot=(n("be4d"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row h-100%"},[n("div",{staticClass:"container my-auto",attrs:{align:"center"}},[n("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"}},[n("router-link",{attrs:{to:"/persona"}},[n("i",{staticClass:"fa fa-user fa-5x"}),n("h1",[e._v("Persona")])])],1),n("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"}},[n("router-link",{attrs:{to:"/product"}},[n("i",{staticClass:"fa fa-laptop fa-5x"}),n("h1",[e._v("Product")])])],1),n("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"}},[n("router-link",{attrs:{to:"/insights"}},[n("i",{staticClass:"fa fa-exclamation fa-5x"}),n("h1",[e._v("Insights")])])],1)])])}),rt=[],st={},lt=Object(h["a"])(st,ot,rt,!1,null,"223853d8",null),ct=lt.exports;a["default"].use($["a"]);var dt=new $["a"]({routes:[{path:"/",name:"home",component:ct},{path:"/login",name:"login",component:it},{path:"/admin",name:"admin",component:Xe},{path:"/persona",name:"persona default",component:ie,children:[{path:":id",component:ie}]},{path:"/product",name:"product default",component:je,children:[{path:":id",component:je}]},{path:"/insights",name:"insights default",component:ze,children:[{path:":id",component:ze}]}]});dt.beforeEach((function(e,t,n){if("login"===e.name)return p.state.auth_success,void n();p.getters.isLoggedIn?n():n("/login")}));var ut=dt;n("e532"),n("8d63"),n("ab8b"),n("2dd8"),n("3a62");a["default"].config.productionTip=!1,a["default"].use(y["a"]),a["default"].component("multiselect",k.a),a["default"].prototype.$http=d.a;var pt=localStorage.getItem("token");pt&&(a["default"].prototype.$http.defaults.headers.common["Authorization"]=pt),new a["default"]({router:ut,store:p,render:function(e){return e(x)}}).$mount("#app"),ut.start(x,"#Entry")},"58de":function(e,t,n){},"5a88":function(e,t,n){"use strict";var a=n("7b49"),i=n.n(a);i.a},"5b493":function(e,t,n){"use strict";var a=n("58de"),i=n.n(a);i.a},"694d":function(e,t,n){"use strict";var a=n("c0d2"),i=n.n(a);i.a},"6a6d":function(e,t,n){"use strict";var a=n("d1df"),i=n.n(a);i.a},"7b49":function(e,t,n){},8140:function(e,t,n){},"85ec":function(e,t,n){},a7f6:function(e,t,n){"use strict";var a=n("f2b4"),i=n.n(a);i.a},b0d4:function(e,t,n){"use strict";var a=n("1e1b"),i=n.n(a);i.a},be4d:function(e,t,n){"use strict";var a=n("f1a0"),i=n("1e69"),o=n("2877"),r=Object(o["a"])(i["default"],a["a"],a["b"],!1,null,null,null);r.exports},bf9b:function(e,t,n){"use strict";var a=n("096a"),i=n.n(a);i.a},c0d2:function(e,t,n){},c6ed:function(e,t,n){"use strict";var a=n("0cba"),i=n.n(a);i.a},d1df:function(e,t,n){},d74c:function(e,t,n){e.exports=n.p+"static/img/img_avatar2.55221557.png"},e835:function(e,t,n){"use strict";var a=n("8140"),i=n.n(a);i.a},f1a0:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[n("h1",[e._v("404 PAGE NOT FOUND")])])}];n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i}))},f2b4:function(e,t,n){}});
//# sourceMappingURL=app.db2d1a98.js.map